{"version":3,"sources":["lib/storage.js","lib/persistence.js","components/Story.js","lib/useChildrenHash.js","components/Chapter.js","components/Section.js","components/Goto.js","components/Choice.js","components/Option.js","components/Text.js","components/WaitForInput.js","components/If.js","components/Newline.js","story/ChapterOne.js","components/Title.js","components/Subtitle.js","story/Intro.js","story/End.js","story/index.js","theme.js","serviceWorker.js","index.js","App.js"],"names":["APP_PREFIX_KEY","storageKey","namespace","key","set","value","window","localStorage","setItem","JSON","stringify","clear","Array","length","keys","map","i","filter","startsWith","replace","forEach","removeItem","del","NamespaceContext","React","createContext","useNamespace","useContext","joinNamespace","parentNamespace","Namespace","children","Provider","usePersistentState","defaultValue","persistedValue","useMemo","localStorageKey","rawValue","getItem","parse","error","console","warn","Storage","useState","_setValue","useEffect","setValue","useCallback","newValue","withNamespace","Component","mockChild","child","idx","props","Children","clearNamespace","StoryContext","currentChapter","setCurrentChapter","elements","slice","chapterNum","Fragment","isActive","onEnd","Grid","item","Button","variant","color","onClick","log","Container","maxWidth","container","justify","alignItems","hashStr","str","chr","hash","charCodeAt","joinHashes","hashA","hashB","undefined","toString","isArray","reduce","isValidElement","ele","Object","useChildrenHash","ChapterContext","useChapter","useStyles","makeStyles","root","width","ChapterEnd","endChapter","entry","childrenHash","classes","lastChildrenHash","setLastChildrenHash","sectionHistory","setSectionHistory","currentSection","storyContexts","_","setSection","section","_childrenByUids","element","uid","className","theme","sectionPaper","padding","spacing","margin","SectionContext","useSection","renderingChildIdx","setRenderingChildIdx","_children","isChildActive","isChildFinished","sectionUid","isFinished","onFinished","Paper","hasTriggered","setHasTriggered","onShow","e","ChoiceContext","selectedElement","direction","wrapper","inner","Option","disabled","Text","endOfTextRef","useRef","skip","cursor","show","onTypingDone","Typography","component","Box","style","paddingTop","float","ref","Delay","Typist","button","expr","_value","scope","script","scopeEval","entered","some","SAMLoading","ms","WaitForInput","Goto","align","Intro","Title","Subtitle","End","ChapterOne","createMuiTheme","palette","primary","main","secondary","background","default","blueGrey","typography","fontFamily","h1","fontSize","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","ThemeProvider","CssBaseline","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.23ace9d4.chunk.js","sourcesContent":["const APP_PREFIX_KEY = \"__FENRIS__\";\n\nfunction storageKey(namespace, key) {\n  return APP_PREFIX_KEY + namespace + \"$\" + key;\n}\n\nexport function keys(namespace) {\n  return [...Array(window.localStorage.length).keys()]\n    .map(i => window.localStorage.key(i))\n    .filter(key => key && key.startsWith(storageKey(namespace, \"\")))\n    .map(key => key.replace(storageKey(namespace, \"\"), \"\"));\n}\n\nexport function get(namespace, key) {\n  const localStorageKey = storageKey(namespace, key);\n  const rawValue = window.localStorage.getItem(localStorageKey);\n  try {\n    return JSON.parse(rawValue);\n  } catch (error) {\n    console.warn(\"Supressing invalid persisted state\", {\n      error,\n      namespace,\n      key,\n      localStorageKey,\n      rawValue\n    });\n  }\n}\n\nexport function set(namespace, key, value) {\n  return window.localStorage.setItem(\n    storageKey(namespace, key),\n    JSON.stringify(value)\n  );\n}\n\nexport function del(namespace, key) {\n  return window.localStorage.removeItem(storageKey(namespace, key));\n}\n\nexport function clear(namespace) {\n  keys(namespace).forEach(key => del(namespace, key));\n}\n","import React from \"react\";\nimport * as Storage from \"./storage\";\n\nconst NamespaceContext = React.createContext();\n\nexport function useNamespace() {\n  return React.useContext(NamespaceContext) || \"root\";\n}\n\nexport function joinNamespace(parentNamespace, namespace) {\n  return parentNamespace + \"$\" + namespace;\n}\n\nexport function Namespace({ namespace, children }) {\n  const parentNamespace = useNamespace();\n  return (\n    <NamespaceContext.Provider\n      value={joinNamespace(parentNamespace, namespace)}\n    >\n      {children}\n    </NamespaceContext.Provider>\n  );\n}\n\nfunction usePersistentState(key, defaultValue) {\n  const namespace = useNamespace();\n  const persistedValue = React.useMemo(() => Storage.get(namespace, key), [\n    namespace,\n    key\n  ]);\n  const [value, _setValue] = React.useState(\n    persistedValue ? persistedValue : defaultValue\n  );\n  // ensure default value is always flushed to local storage\n  React.useEffect(() => {\n    if (value === defaultValue) {\n      Storage.set(namespace, key, defaultValue);\n    }\n  }, [value, defaultValue, namespace, key]);\n  // wrap setValue from React.useState to sync with Storage\n  const setValue = React.useCallback(\n    newValue => {\n      _setValue(newValue);\n      Storage.set(namespace, key, newValue);\n    },\n    [namespace, key, _setValue]\n  );\n  return [value, setValue];\n}\n\nexport default function withNamespace(Component, namespace) {\n  const mockChild = (child, idx) => (\n    <Namespace namespace={idx} {...child.props}>\n      {child}\n    </Namespace>\n  );\n\n  return ({ children, ...props }) => (\n    <Namespace namespace={namespace}>\n      <Component usePersistentState={usePersistentState} {...props}>\n        {children && React.Children.map(children, mockChild)}\n      </Component>\n    </Namespace>\n  );\n}\n\nexport function clearNamespace(namespace) {\n  Storage.clear(namespace);\n}\n","import React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\n\nimport withNamespace, {\n  Namespace,\n  useNamespace,\n  joinNamespace,\n  clearNamespace\n} from \"../lib/persistence\";\n\nconst StoryContext = React.createContext();\n\nexport const useStory = () => {\n  return React.useContext(StoryContext);\n};\n\nconst Story = ({ children, usePersistentState }) => {\n  const [currentChapter, setCurrentChapter] = usePersistentState(\n    \"CurrentChapter\",\n    0\n  );\n  const namespace = useNamespace();\n  const elements = React.useMemo(\n    () =>\n      children &&\n      children.slice(0, currentChapter + 1).map((child, chapterNum) => (\n        <React.Fragment key={chapterNum}>\n          <Namespace namespace={\"Chapter\" + chapterNum}>\n            <StoryContext.Provider\n              value={{\n                isActive: chapterNum === currentChapter,\n                onEnd: () =>\n                  chapterNum === currentChapter &&\n                  setCurrentChapter(currentChapter + 1)\n              }}\n            >\n              {child}\n            </StoryContext.Provider>\n          </Namespace>\n          {chapterNum < currentChapter && (\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={() => {\n                  for (let i = chapterNum + 1; i <= currentChapter; i++) {\n                    console.log(\"clearNamespace\", {\n                      namespace: joinNamespace(namespace, \"Chapter\" + i),\n                      chapterNum,\n                      currentChapter\n                    });\n                    clearNamespace(joinNamespace(namespace, \"Chapter\" + i));\n                  }\n                  setCurrentChapter(chapterNum);\n                }}\n              >\n                Restart from Here\n              </Button>\n            </Grid>\n          )}\n        </React.Fragment>\n      )),\n    [currentChapter, setCurrentChapter, children, namespace]\n  );\n\n  console.log(\"Story.render\", {\n    currentChapter,\n    setCurrentChapter,\n    namespace,\n    elements\n  });\n  return (\n    <Container maxWidth=\"sm\">\n      <Grid container justify=\"center\" alignItems=\"center\">\n        {elements}\n      </Grid>\n    </Container>\n  );\n};\n\nexport default withNamespace(Story, \"Story\");\n","import React from \"react\";\n\nconst hashStr = str => {\n  var hash = 0,\n    i,\n    chr;\n  if (str.length === 0) return str;\n  for (i = 0; i < str.length; i++) {\n    chr = str.charCodeAt(i);\n    hash = joinHashes(hash, chr);\n  }\n  return hash;\n};\n\nconst hashReactElement = ele => {\n  return joinHashes(hash(ele[\"$$typeof\"]), hash(ele.props));\n};\n\nconst joinHashes = (hashA, hashB) => {\n  // force to 32 bit number\n  hashA |= 0;\n  hashB |= 0;\n  return ((hashA << 5) - hashA + hashB) | 0;\n};\n\nconst hash = child => {\n  if (child === undefined) {\n    return 0;\n  } else if (child === null) {\n    return 1;\n  } else if (typeof child === \"boolean\") {\n    return 2 + child;\n  } else if (typeof child === \"number\") {\n    return child | 0;\n  } else if (typeof child === \"string\") {\n    return hashStr(child);\n  } else if (typeof child === \"function\") {\n    return hashStr(child.toString());\n  } else if (Array.isArray(child)) {\n    return child.map(hash).reduce(joinHashes, 0);\n  } else if (React.isValidElement(child)) {\n    return hashReactElement(child);\n  } else if (typeof child === \"object\") {\n    return Object.keys(child)\n      .map(key => joinHashes(hash(key), hash(child[key])))\n      .reduce(joinHashes, 0);\n  } else if (typeof child === \"symbol\") {\n    return hashStr(child.toString());\n  } else {\n    console.warn(\"hashing unknown type: \", child);\n    return hashStr(child.toString());\n  }\n};\n\nconst useChildrenHash = children => {\n  return React.useMemo(() => {\n    return hash(children);\n  }, [children]);\n};\n\nexport default useChildrenHash;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport withNamespace, {\n  Namespace,\n  useNamespace,\n  clearNamespace\n} from \"../lib/persistence\";\nimport useChildrenHash from \"../lib/useChildrenHash\";\nimport { useStory } from \"./Story\";\n\nconst ChapterContext = React.createContext();\n\nexport const useChapter = () => {\n  return React.useContext(ChapterContext);\n};\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: \"100%\"\n  }\n}));\n\nconst Chapter = ({ entry, children, usePersistentState }) => {\n  const childrenHash = useChildrenHash(children);\n  const { isActive, onEnd } = useStory();\n  const classes = useStyles();\n  const [lastChildrenHash, setLastChildrenHash] = usePersistentState(\n    \"lastChildrenHash\",\n    childrenHash\n  );\n  const namespace = useNamespace();\n  React.useEffect(() => {\n    if (isActive && lastChildrenHash !== childrenHash) {\n      // TODO what do we do here?\n      console.warn(\"Detect changed lastChildrenHash\", {\n        lastChildrenHash,\n        childrenHash\n      });\n      setLastChildrenHash(childrenHash);\n      clearNamespace(namespace);\n    } else {\n      console.log(\"Chapter lastChildrenHash === childrenHash\");\n    }\n  }, [\n    childrenHash,\n    lastChildrenHash,\n    setLastChildrenHash,\n    isActive,\n    namespace\n  ]);\n\n  const [sectionHistory, setSectionHistory] = usePersistentState(\n    \"sectionHistory\",\n    [entry]\n  );\n\n  const currentSection = sectionHistory[sectionHistory.length - 1];\n\n  const storyContexts = React.useMemo(\n    () =>\n      sectionHistory.map((_, idx) => {\n        return {\n          sectionHistory,\n          currentSection,\n          isActive: isActive && idx === sectionHistory.length - 1,\n          endChapter: () => onEnd(),\n          setSection: section => setSectionHistory([...sectionHistory, section])\n        };\n      }),\n    [sectionHistory, currentSection, setSectionHistory, onEnd, isActive]\n  );\n\n  const _childrenByUids = React.useMemo(() => {\n    const _childrenByUids = {};\n    React.Children.forEach(children, element => {\n      if (!React.isValidElement(element)) return;\n      const { uid } = element.props;\n      if (!uid)\n        return console.warn(\"Chapter is ignoring section without valid uid: \", {\n          element\n        });\n      _childrenByUids[uid] = element;\n    });\n    return _childrenByUids;\n  }, [children]);\n\n  console.log(\"Chapter.render\", {\n    isActive,\n    entry,\n    children,\n    sectionHistory,\n    currentSection,\n    storyContexts,\n    _childrenByUids\n  });\n\n  return (\n    <Grid item className={classes.root}>\n      {sectionHistory &&\n        sectionHistory.map(\n          (section, idx) =>\n            (section && _childrenByUids[section] && (\n              <ChapterContext.Provider\n                key={section + \"-\" + idx}\n                value={storyContexts[idx]}\n              >\n                <Namespace namespace={idx}>\n                  {_childrenByUids[section]}\n                </Namespace>\n              </ChapterContext.Provider>\n            )) ||\n            null\n        )}\n    </Grid>\n  );\n};\n\nexport const ChapterEnd = () => {\n  const { endChapter } = useChapter();\n  endChapter();\n  return null;\n};\n\nexport default withNamespace(Chapter, \"Chapter\");\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Paper } from \"@material-ui/core\";\nimport withNamespace from \"../lib/persistence\";\nimport { useChapter } from \"./Chapter\";\n\nconst useStyles = makeStyles(theme => ({\n  sectionPaper: {\n    padding: theme.spacing(3, 2),\n    margin: theme.spacing(3, 0)\n  }\n}));\n\nconst SectionContext = React.createContext();\n\nconst Section = ({ children, uid, usePersistentState }) => {\n  const classes = useStyles();\n  const { isActive, currentSection, sectionHistory } = useChapter();\n  const [renderingChildIdx, setRenderingChildIdx] = usePersistentState(\n    \"renderingChildIdx\",\n    0\n  );\n\n  console.log(\"Section.render\", {\n    children,\n    uid,\n    isActive,\n    renderingChildIdx,\n    currentSection,\n    sectionHistory\n  });\n\n  const _children = React.useMemo(\n    () =>\n      React.Children.map(children, (child, idx) => {\n        if (!React.isValidElement(child)) return child;\n        const isChildActive = isActive && idx === renderingChildIdx;\n        const isChildFinished = !isActive || idx < renderingChildIdx;\n        return (\n          <SectionContext.Provider\n            value={{\n              sectionUid: uid,\n              isActive: isChildActive,\n              isFinished: isChildFinished,\n              onFinished: () =>\n                isChildActive && setRenderingChildIdx(renderingChildIdx + 1)\n            }}\n          >\n            {child}\n          </SectionContext.Provider>\n        );\n      }),\n    [children, uid, isActive, renderingChildIdx, setRenderingChildIdx]\n  );\n\n  return (\n    <Paper className={classes.sectionPaper}>\n      {_children.slice(0, renderingChildIdx + 1) || []}\n    </Paper>\n  );\n};\n\nexport const useSection = () => React.useContext(SectionContext);\n\nexport default withNamespace(Section, \"Section\");\n","import React from \"react\";\nimport IntersectionVisible from \"react-intersection-visible\";\nimport { useChapter } from \"./Chapter\";\n\nexport default ({ section, ...props }) => {\n  const { isActive, setSection } = useChapter();\n  const [hasTriggered, setHasTriggered] = React.useState(!isActive);\n  return (\n    <IntersectionVisible\n      onShow={e => {\n        if (setSection && !hasTriggered) {\n          console.log(\"Goto.onShow\", {\n            e,\n            hasTriggered,\n            section,\n            setSection,\n            props\n          });\n          setSection(section);\n          setHasTriggered(true);\n        }\n      }}\n    />\n  );\n};\n","import React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport withNamespace from \"../lib/persistence\";\nimport { useSection } from \"./Section\";\nimport { useChapter } from \"./Chapter\";\n\nconst ChoiceContext = React.createContext();\n\nexport const useChoice = () => React.useContext(ChoiceContext);\n\nconst Choice = ({ children, usePersistentState }) => {\n  const { currentSection, setSection } = useChapter();\n  const { isActive } = useSection();\n\n  const [value, setValue] = usePersistentState(\"value\", null);\n\n  const _children = React.useMemo(\n    () =>\n      React.Children.map(children, child => {\n        if (!React.isValidElement(child)) return child;\n        return (\n          <ChoiceContext.Provider\n            value={{\n              selectedElement: value,\n              onFinished: section => {\n                if (isActive && currentSection !== section) {\n                  setSection(section);\n                  setValue(section);\n                }\n              }\n            }}\n          >\n            {child}\n          </ChoiceContext.Provider>\n        );\n      }),\n    [children, value, isActive, currentSection, setSection, setValue]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      spacing={2}\n      justify=\"center\"\n      alignItems=\"center\"\n    >\n      {_children || []}\n    </Grid>\n  );\n};\n\nexport default withNamespace(Choice, \"Choice\");\n","import React from \"react\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useChoice } from \"./Choice\";\n\nconst useStyles = makeStyles({\n  wrapper: {\n    width: \"100%\"\n  },\n  inner: {\n    width: \"100%\"\n  }\n});\n\nconst Option = ({ children, section }) => {\n  const classes = useStyles();\n  const { selectedElement, onFinished } = useChoice();\n  return !selectedElement ? (\n    <Grid item className={classes.wrapper}>\n      <Button\n        className={classes.inner}\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={e => onFinished(section)}\n      >\n        {children}\n      </Button>\n    </Grid>\n  ) : selectedElement === section ? (\n    <Grid item className={classes.wrapper}>\n      <Button\n        className={classes.inner}\n        variant=\"contained\"\n        color=\"primary\"\n        disabled\n      >\n        {children}\n      </Button>\n    </Grid>\n  ) : null;\n};\nexport default Option;\n","import React from \"react\";\nimport Typist from \"react-typist\";\nimport { Box, Button, Grid, Typography } from \"@material-ui/core\";\n\nimport { useSection } from \"./Section\";\n\nconst Text = ({ children, ...props }) => {\n  const { isActive, onFinished } = useSection();\n  const endOfTextRef = React.useRef();\n\n  const skip = e => {\n    console.log(\"Text.skip\", { isActive, onFinished });\n    if (isActive) onFinished();\n  };\n\n  console.log(\"Text.render\", { isActive, onFinished });\n\n  return (\n    <div>\n      {!isActive ? (\n        <Box>\n          <Typography component=\"div\">{children}</Typography>\n        </Box>\n      ) : (\n        <Typist cursor={{ show: false }} onTypingDone={skip} {...props}>\n          <Typography component=\"div\">{children}</Typography>\n        </Typist>\n      )}\n      {isActive && (\n        <Grid container justify=\"center\" alignItems=\"center\">\n          <Grid item>\n            <Button variant=\"contained\" onClick={skip}>\n              Skip\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n      <div\n        style={{ paddingTop: \"2em\", float: \"left\", clear: \"both\" }}\n        ref={endOfTextRef}\n      />\n    </div>\n  );\n};\n\nText.Delay = Typist.Delay;\n\nexport default Text;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useSection } from \"./Section\";\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\n\nexport default ({ children }) => {\n  const { isFinished, onFinished } = useSection();\n  const classes = useStyles();\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid item>\n        <Button\n          disabled={isFinished}\n          variant=\"contained\"\n          className={classes.button}\n          color=\"primary\"\n          onClick={e => onFinished()}\n        >\n          {children}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\n\nimport { useChapter } from \"./Chapter\";\nimport withNamespace from \"../lib/persistence\";\n\nfunction scopeEval(scope, script) {\n  if (typeof script === \"function\") {\n    return script(scope);\n  } else {\n    return false;\n  }\n}\n\nconst If = ({ expr, children, usePersistentState, ...props }) => {\n  const { isActive, sectionHistory } = useChapter();\n  const [_value, _setValue] = usePersistentState(\"value\", false);\n  React.useEffect(() => {\n    if (!isActive) return;\n    const scope = {\n      entered: sectionUid =>\n        sectionHistory && sectionHistory.some(uid => uid === sectionUid)\n    };\n    _setValue(scopeEval(scope, expr));\n  }, [expr, isActive, sectionHistory, _setValue]);\n\n  console.log(\"If.render\", { _value, isActive, sectionHistory });\n  return _value ? children : null;\n};\n\nexport default withNamespace(If, \"If\");\n","import React from \"react\";\n\nexport default () => (\n  <React.Fragment>\n    <br />\n    <br />\n  </React.Fragment>\n);\n","import React from \"react\";\nimport Chapter, { ChapterEnd } from \"../components/Chapter\";\nimport Section from \"../components/Section\";\nimport Goto from \"../components/Goto\";\nimport Choice from \"../components/Choice\";\nimport Option from \"../components/Option\";\nimport Text from \"../components/Text\";\nimport WaitForInput from \"../components/WaitForInput\";\nimport If from \"../components/If\";\nimport NL from \"../components/Newline\";\n\nconst SAMLoading = () => (\n  <React.Fragment>\n    <Text.Delay ms={1000} />.<Text.Delay ms={1000} />.<Text.Delay ms={1000} />.\n    <Text.Delay ms={1000} />.<Text.Delay ms={5100000} />.<NL />\n  </React.Fragment>\n);\n\nexport default props => (\n  <Chapter entry=\"chapter-one-intro\" {...props}>\n    <Section uid=\"chapter-one-intro\">\n      <Text>\n        Chapter 1<NL />\n        Deep space, 2267\n        <NL />\n        You awake to the chime of a system alert pinging against your skull. You\n        open your eyes and your wetware drops out of sleep mode. A HUD unfolds\n        in virtual space in front of you, like a virtual visor sitting over your\n        face.\n      </Text>\n      <WaitForInput>Look at Visor</WaitForInput>\n      <Text>\n        On the left, you see readouts from the engines of your ship. Nozzle\n        temperatures and fuel flow look the same as before you nodded off. On\n        the right, you can see a panel of status lights. The TCAS light is\n        flashing red. Proximity warning.\n      </Text>\n      <WaitForInput>Look at Real-Space</WaitForInput>\n      <Text>\n        You focus your attention towards real-space. The HUD fades away like as\n        it detects a change in your attention. You see a discarded wrapper\n        floating in the bridge. Zero-G.\n        <NL />\n        “SAM”, You say, summoning the ship’s AI.\n      </Text>\n      <Goto section=\"chapter-one-wakeup-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-wakeup-options\">\n      <Text>What do you say?</Text>\n      <Choice>\n        <If\n          expr={({ entered }) => !entered(\"chapter-one-distance-from-target\")}\n        >\n          <Option section=\"chapter-one-distance-from-target\">\n            “What’s our distance from target?”\n          </Option>\n        </If>\n        <If\n          expr={({ entered }) =>\n            !entered(\"chapter-one-open-channel-to-dispatch\")\n          }\n        >\n          <Option section=\"chapter-one-open-channel-to-dispatch\">\n            “Open a channel to dispatch.”\n          </Option>\n        </If>\n        <If\n          expr={({ entered }) =>\n            entered(\"chapter-one-distance-from-target\") &&\n            entered(\"chapter-one-open-channel-to-dispatch\")\n          }\n        >\n          <Option section=\"chapter-one-approach-checklist\">\n            “SAM, let’s run the approach checklist.”\n          </Option>\n        </If>\n      </Choice>\n    </Section>\n\n    <Section uid=\"chapter-one-distance-from-target\">\n      <Text>\n        “What’s our distance from target? Why aren’t we braking?”\n        <NL />\n        “Distance from target approximately\n        <SAMLoading /> ten thousand kilometers\n        <NL />\n        <Text.Delay ms={500} />\n        Closest approach in <SAMLoading /> T minus 3 minutes 31 seconds\n        <NL />\n        <Text.Delay ms={500} />\n        Reactor scram triggered after crossing safe radiation range from\n        target.”\n        <NL />\n        <If\n          expr={({ entered }) =>\n            !entered(\"chapter-one-open-channel-to-dispatch\")\n          }\n        >\n          The AI, SAM--as you told him to call himself, curtly answered all your\n          questions. Sometimes you wish you had sprung for the personality\n          upgrade, but it required installing a big red eye and you didn’t want\n          to ruin the vibe of your cockpit. So instead your ship had a\n          oppressively monotonic disembodied voice.\n        </If>\n      </Text>\n      <Goto section=\"chapter-one-wakeup-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-open-channel-to-dispatch\">\n      <Text>\n        “Open a channel to dispatch.”\n        <NL />\n        “Standby while a channel is opened.”\n        <NL />\n        <If\n          expr={({ entered }) => !entered(\"chapter-one-distance-from-target\")}\n        >\n          The AI, SAM--as you told him to call himself, curtly answered all your\n          questions. Sometimes you wish you had sprung for the personality\n          upgrade, but it required installing a big red eye and you didn’t want\n          to ruin the vibe of your cockpit. So instead your ship had a\n          oppressively monotonic disembodied voice.\n        </If>\n      </Text>\n      <Goto section=\"chapter-one-wakeup-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-approach-checklist\">\n      <Text>\n        “SAM, let’s run the approach checklist.”\n        <NL />\n        “Ok. Running approach checklist.”\n      </Text>\n      <Goto section=\"chapter-one-control-program-intro\" />\n    </Section>\n\n    <Section uid=\"chapter-one-control-program-intro\">\n      <Text>\n        You focus on the image: Blue Sky from Horizon to Horizon. This image is\n        the preset that triggers your wetware to start the control program for\n        the ship. The visor folds away and the spherical walls of the bridge\n        divide into hexagonal tiles about a foot in size.\n        <NL />\n        As the tiles fade away, a star field comes into view. A line stretches\n        towards infinity in front of you -- your velocity vector -- with\n        perpendicular lines crossing the line at intervals, counting down the\n        meters to the closest approach to your target.\n        <NL />\n        One mark zips past you. You can already see the next mark rapidly\n        closing on you. Your gut drops a bit as your brain tried to understand\n        how you are hurling so fast through the void.\n      </Text>\n      <Goto section=\"chapter-one-checklist-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-checklist-options\">\n      <Text>\n        You see a number of items projected on your visor. What do you do?\n      </Text>\n      <Choice>\n        <If expr={({ entered }) => !entered(\"chapter-one-checklist-thrusters\")}>\n          <Option section=\"chapter-one-checklist-thrusters\">\n            Chemical Thrusters\n          </Option>\n        </If>\n        <If\n          expr={({ entered }) => !entered(\"chapter-one-magnetic-tether-check\")}\n        >\n          <Option section=\"chapter-one-magnetic-tether-check\">\n            Magnetic Tether\n          </Option>\n        </If>\n        <If expr={({ entered }) => !entered(\"chapter-one-time-to-approach\")}>\n          <Option section=\"chapter-one-time-to-approach\">Broadcast Hail</Option>\n        </If>\n        <If\n          expr={({ entered }) =>\n            entered(\"chapter-one-checklist-thrusters\") &&\n            entered(\"chapter-one-magnetic-tether-check\") &&\n            entered(\"chapter-one-time-to-approach\")\n          }\n        >\n          <Option section=\"chapter-one-checklist-complete\">\n            Finish approach checklist\n          </Option>\n        </If>\n      </Choice>\n    </Section>\n\n    <Section uid=\"chapter-one-checklist-thrusters\">\n      <Text>\n        You look at the item on the checklist appears projected on your virtual\n        visor:\n        <NL />- Chemical thrusters: Check?\n        <NL />\n        You look down at the digital model of your ship. Since she was still\n        rigged for braking, the longest axis of the ship is perfectly aligned\n        with the velocity vector.\n        <NL />\n        At the front, the massive nozzle of your fusion reactor. It is studded\n        with supporting equipment--a tangle of wires, pipes and panels.\n        <NL />\n        Unceremoniously welded to the choke point of the nozzle is a massive\n        sphere--the containment vessel for the heart of your ship--the fusion\n        reactor. The sphere is bolted and embedded within a scaffold of iron\n        hexagons that came together on the opposite side of the nozzle to form a\n        rectangular box girder.\n        <NL />\n        You stretch your arm out in front of you and hold your hand up, palm\n        out. The command to thrust in the direction of your arm.\n        <NL />\n        Pinpoints of light spear--light and shadows playing off the hair-thin\n        trusses that you can now see are attached at various points along the\n        propulsion bus.\n        <NL />\n        You can feel the jutter of thrusters firing in your bones as they\n        implement the command to fire through a delicate dance of mass and\n        newtonian physics.\n        <NL />\n        “Thrusters check.” you reply.\n      </Text>\n      <Goto section=\"chapter-one-checklist-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-magnetic-tether-check\">\n      <Text>\n        “Magnetic tether, check?”\n        <NL />\n        You move your eyes down from the reactor and follow along the long truss\n        that make up the backbone of the ship--the thrust plate.\n        <NL />\n        First, nearest to the reactor, are attached the propulsion tanks. 6 of\n        them, shaped like white giant pill capsules, arranged radial around the\n        truss. you normally only ran with 3 prop tanks, but the endurance of\n        this mission called for extra fuel unless you wanted to sit and wait for\n        the planets to align--literally. Next, came the radiation-shielding\n        Section. Six massive silica radiator fins rose out like from the truss\n        like petals on a flower. All of them glowing red hot from dissipating\n        the heat of the reactor during braking. My little red void rose, you\n        thought. Then, came the radiation shielding proper in the form of both\n        large magnetic coils as well a large sheets of high density metals just\n        for good measure. Finally, came the portion you always allocated for\n        mission equipment. Bolted to the side of the truss was a large yellow\n        platform with a large reel of steel cable. A hingle and massive\n        hydraulic cylinders connected the platform with a mechanical arm. At the\n        end of the arm, was a large disc connected to a thruster pack. you had\n        once see videos of electromagnetic cranes used in junkyards on Earth\n        from the late 20th century. you had been struck by how similar it looked\n        to the magnetic tether. you picked up the glowing white bubble sitting\n        above the crane arm and held it in front it me. you squeezed the bubble\n        and activating the crane. you then moved your arm around. The crane arm\n        mimicked your movements perfectly. “Magnetic tether, check.” you said\n        aloud, continuing the ceremony of the checklist. you released bubble,\n        releasing control of the crane arm.\n      </Text>\n      <Goto section=\"chapter-one-checklist-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-time-to-approach\">\n      <Text>\n        “Check time to nearest approach.” you continue.\n        <NL />\n        <Text.Delay ms={1000} />\n        “Time to closest approach, T minus 2 minutes 30 seconds.”\n        <NL />\n        “Start broadcasting the standard salvage hail towards the target.”\n        <NL />\n        “Acknowledged.”\n        <NL />\n        On a muffled side-band you could hear the salvage hail broadcasting\n        through the radio telescopes on the ship.\n        <NL />\n        “Message repeats: Unidentified ship at our bearing one eight zero please\n        respond. A ‘Tow or Salvage’ warrant on your ship has been issued by the\n        United Colonies Government, Department of Internal Space. Under\n        authority of 103.§53.1...\"\n        <NL />\n        You tune out the legal part of the message.\n        <NL />\n        ‘Unidentified ship.’ you think.\n        <NL />\n        ‘That’s weird.’\n        <NL />\n        Do you inspect the ship closer?\n      </Text>\n      <Choice>\n        <Option section=\"chapter-one-time-to-approach-look-closer\">\n          Look closer.\n        </Option>\n        <Option section=\"chapter-one-checklist-options\">\n          Continue running checklist.\n        </Option>\n      </Choice>\n    </Section>\n\n    <Section uid=\"chapter-one-time-to-approach-look-closer\">\n      <Text>\n        Your eyes move up the green line of velocity. You can see the distance\n        markers converge on a distance point. As you look towards it, a panel\n        appears next to it.\n        <NL />\n        ----------------------\n        <br />\n        Name: ??????\n        <br />\n        Transponder: OFFLINE\n        <br />\n        ----------------------\n        <NL />\n        “That’s weird. Sam, why aren’t you getting a transponder?”\n        <NL />\n        “Unknown\n        <SAMLoading />\n        All radio transmitters are functioning normally.”\n        <NL />\n        You stare at the panel for a few seconds longer. You are about to zoom\n        in on the target and take a look at it through the ship’s telescopes,\n        but your train of thought was interrupted by SAM.\n        <NL />\n        “Broadcast complete.”\n      </Text>\n      <Goto section=\"chapter-one-checklist-options\" />\n    </Section>\n\n    <Section uid=\"chapter-one-checklist-complete\">\n      <Text>\n        Sam interupts your train of thought\n        <NL />\n        “Channel open. Current light delay is… 16 minutes 23 seconds.”\n        <NL />\n        “Jeez, this thing is out in boonies isn’t it?”\n        <NL />I don’t recognize the intent of your question”, the AI answered\n        without humor.\n        <NL />\n        “Disregard.”\n        <NL />\n        You try to shake yourself out of the lull created by running the\n        checklist with a witless computer.\n        <NL />\n        “SAM, start reading out time to closest approach as we go.”\n        <NL />\n        “Acknowledged. Time to closest approach: T minus 2 minutes 9 seconds.”\n        <NL />\n        “SAM, Starting sending message.”\n        <NL />\n        “Acknowledged.”\n        <NL />\n        “CAPCOM, This is alpha kilo echo 42 23. How copy? I am about 2 minutes\n        from closest approach. With this light delay--I’ll already be in there,\n        lighting the candles before you ping back. Please advise on destination\n        of cargo.”\n        <NL />\n      </Text>\n      <ChapterEnd />\n      <Text>\n        You nodded away the AR world created by your wetware and grab the\n        harness which holds you in the chair suspended in the middle of the\n        bridge. you clicke chest restraints of the harness and push off towards\n        the storage room hatch. Well, storage room was a stretch. It was more a\n        repurposed closet, but it worked for your needs. Right before you plowed\n        into the hatch, you reached out and stopped myself with your arms,\n        quickly grabbing a hand hold. you punched open the hatch and started\n        going through items trying to find your EVA gear. “I am rigging for EVA.\n        I will update you when target is captured.” “SAM, end message. Send\n        message.” “Acknowledged. Message response will take at least 32 minutes\n        46 seconds. Reminder: Time to closest approach, T minus 1 minute 3\n        seconds.” “Shit, SAM\". It took longer to get your suit on than you\n        thought. You pause, thinking for a second. “I guess I gotta cut some\n        corners on the procedures.” You clicked your helmet on. Through the\n        sixth sense of the wet-ware, you could feel the suit interface with the\n        computers embedded within me. “SAM, blow atmosphere on the bridge.\n        Prepare for pilot EVA. Set attitude mode: inertial.” “Acknowledged.”\n        Sounds muffled and then disappeared as the atmosphere inside the ship\n        thinned. Over the past few days, you had had SAM run an acclimatization\n        procedure to get me used to the pressure suit’s atmosphere. This meant\n        you didn’t have to wait to put on the pressure suit. Which meant we\n        could have fun quicker. you turned in place, facing the exterior hatch.\n        you reached out with the sixth sense of your wet-ware and tried to move\n        forward. A swarm of cold-gas thrusters fired in patterns, pushing me\n        forward at a steady walking speed. you grabbed the panel for the outside\n        hatch in AR. It popped open a bit red button. you love big red buttons.\n        And pressing them. you pressed it. The hatch opened slowly. Even though\n        you had just seen it in AR, you always felt the stars looked better in\n        person. you moved outside on a cloud of cold gas thrusters. Ahead, the\n        view of the target was blocked by the mass of the radiator fins of your\n        own ship. Which was nice because you would rather they block any stray\n        rems coming off your reactor. Around them, you could catch a glimpse of\n        a massive rectangular block. The ship was painted a reflective white\n        color, causing it shine brightly in the harsh sunlight of space. At one\n        of end of the block, you could just make out the cones of multiple drive\n        blocks. you could just start to see a forest of attentae around the\n        front. “SAM, start message. CAPCOM. Alpha kilo echo 42 23. you can’t\n        read target’s transponder. you have visual on target. Target appears\n        intact and does not have any visible damage to comms. Array. Please\n        advise on the nature of the target.” you looked through AR at the\n        target. The ship’s telescopes kicked into action and your field of\n        vision zoomed towards it. It was definitely a cargo carrier of some\n        sort. Not a bulk carrier, like mine, designed for long hauls and lots of\n        cargo. Rather this was something designed to move something discreetly\n        and quickly through the system. State of the art, too, judging from the\n        equipment you could see on the outside. Much more efficient fusion\n        drive. No need for bulky radiators like your girl. “Target is a, uh…,\n        cargo ship of some sort. Tail number is not visible to ship’s\n        telescopes.” Just then, something clicked into place. How could you be\n        so dumb? Second law of thermodynamics, stupid. “Additional information,\n        CAPCOM. No external signs of reactor activity, and radiators are dark.\n        She’s been powered down for a while. Man, looks like this tow is gonna\n        take a while.” you said the last part mostly to myself. “James. T minus\n        15 seconds to closest approach.” SAM chimed in. you nodded away the AR\n        image of the ship, but could see it wasn’t really needed. The ship\n        loomed large behind the radiator fins. you turned your back to the ship,\n        looking away from the direction of travel. you reached out to your boots\n        with your sixth sense and engaged the electromagnetic coils buried\n        within them. you reached out in AR and grabbed onto the magnetic tether.\n        you felt a tingle of pins as your arm and the robotic arm become one.\n        you counted down the seconds silently to myself as a field on the visor\n        of your suit did the same. Everything was quiet except the low hum of\n        the suit’s environment control systems and the sound of your own breath.\n        In the shadow of your ship, you could look out at the infinite field of\n        stars in the sky. Of course, you could see them whenever you wanted in\n        AR, but it wasn’t the same. “T minus 3, 2, 1. Mark.” SAM cut in again.\n        you didn’t have time to scold him for breaking your perfect moment. The\n        ship whizzed past me. you glanced at your wrist in AR to ensure that the\n        mode for the reel was not set to “BRAKE”. you didn’t want to be thrown\n        off the ship by snagging this guy. you put your hand out in front of me\n        with your palm out. The magnetic tether’s robotic arm mirrored mine\n        exactly. you reached out with your sixth sense and called on it to fire.\n        you felt a sudden jolt in the bones of your body as the rocket pack on\n        the end of the tether fired. The familiar staccato patterns of thrusters\n        immediately started to work against it. you could see end of the tether\n        flying off after the ship through the ship’s telescopes. It flapped this\n        way and that way as though fluttering in breezes of cold nitrogen gas.\n        you reached out with your sixth sense, guiding it towards the receding\n        ship. you felt the end of the tether attach to the target through your\n        sixth sense. It was as though your hand had grown a sucker and using it\n        you had sucked onto the cold metal side of ship. Immediately, you could\n        feel the cable being pulled by the inertia of our two ships parting. you\n        wasn’t in a big rush to stop out ships from parting. you had kilometers\n        of cable to spare in the tether. you was free to use the tether’s BRAKE\n        mode. Hidden within the tether’s drum was thick oil. Using a fan to turn\n        against the viscosity of the oil, you could dump our difference in\n        inertia into heat energy. Second law of thermodynamics, ladies and\n        gentlemen! However--due to a literal alignment of planets--you had fuel\n        to spare on this mission. you reached towards the ships thrusters and\n        willed the ship to thrust against our direction of travel again. The\n        thrust came in waves through your boots. The ship started dropping away\n        from me. Appearing to move upwards as our orbital speeds changed. you\n        moved the vector of thrust for the ship to compensate. you could see the\n        ship become still against the field of stars. “SAM, re-engage inertial\n        hold mode.” “Acknowledged.” Again, you looked at your wrist. you flicked\n        the mode on the magnetic tether to “BRAKE” and released control on the\n        magnetic tether. you unlocked your boots from the thick steel panels\n        that made up the outside of the bridge and turned towards the platform\n        of the magnetic tether. you floated forwards. Now that we’ve zero-d our\n        relative velocity, there’s no need to hurry. “SAM. Please remind me when\n        the round-trip light delay interval is over. you want to know when you\n        should expect to hear back from CAPCOM.” “Roger. Your first message will\n        reach Dispatch in about 14 minutes. The minimum time to response is\n        about 30 minutes.” you thought for a second. “SAM, did you just change\n        the way you speak? You just used ‘Roger’, not ‘Acknowledged’”. “you\n        don’t know what you mean, James.” Being this far out from civilization\n        was starting to creep me out. Maybe it’s the silence of working in zero\n        atmosphere or the atmosphere of living with your own breath, but working\n        in a suit for long periods of times can make one prone to superstition.\n        you reached down to your belt and grabbed a tool. It looked like a\n        trapezoid made out of fat aluminum tubes. It had an arrangement of 4\n        pulleys at each of the vertices of the trapezoid. The Handi-Tether\n        Traversal Tool™ was the fastest and cheapest way across the gap. In the\n        seconds that it took the tether to fly, we had lost a lot of meters. you\n        could have used AR to check it, but you figured we had at least a\n        kilometer to go. “Take care, James” “SAM, you swear you’re acting weird.\n        Standby for now.” “Ok, James” you clicked the tether onto the steel\n        cabling coming out from the top of the mechanical arm. you checked the\n        battery panel on the side. Nearly 100% battery. Good. Not that you’m\n        worried. The Handi-Tether Traversal Tool™ has ‘Patent-pending\n        super-Solar tech! Guaranteed not to need charging for at least 10\n        years!’. At least that’s what a company sales rep told me before you\n        bought it. you’ve never actually seen any solar panels on this thing now\n        that you’ve thought about it. you braced myself through your sixth\n        sense. The bio-muscles on your suit tensed up and locked in place around\n        the grip you had on the tool. you pushed a button on the panel of the\n        tool. you started zipping off towards the distant ship. “SAM, start\n        another message.” “CAPCOM, you’ve rendezvoused with the target, and am\n        currently progressing along the tether. Target has not responded to\n        standard salvage hail. you am proceeding with mission. Please advise\n        about final disposition of cargo. In the meantime, you am going to\n        investigate propellent reserves onboard and then try to restart the\n        reactor core.” “SAM, send message.” “you’ve sent that message for you,\n        James.” “You’re doing it again SAM! What’s going on. You never talk like\n        this.” “you don’t know what you mean, James.” “Deactivate yourself, SAM.\n        you’ll take a look at you later.” “If that’s what you want, James.” “But\n        keep the radio live.” you quickly added after thinking for a second. My\n        comment was met with silence. you assumed that he heard that. you looked\n        towards the brilliant white ship. The starfield darkened as the sun\n        filters in your helmet adapted to the strong light. you suddenly felt as\n        though you was examining a model against black velvet. you zoomed in\n        with ships telescopes and scanned the exterior again. you could now see\n        that the ship’s skin which had looked completely smooth from a distance\n        was actually made of little square panels. you searched the entire\n        surface of the ship, looking for some break or indication of entry\n        point, but there were no marks and nothing of note other than the\n        regular grid of squares. you noticed that you was already well past the\n        halfway point of the tether. you reached out to the humming tool and\n        flipped a switch inside it with your mind. The braking force from the\n        device rolled through your arms. The little AI of the tool was having to\n        use way more force than normal since you’d overshot your mark. The\n        surface of the ship loomed large in front of me. you couldn’t help but\n        think of it as the arch of firmament, with me rushing headlong up\n        towards it. you mentally reached out thinking “BRAKE”. It didn’t do\n        anything since this dumb little tool doesn’t have a sixth sense\n        attachment, but the little AI was smart enough to bring me to a stop\n        without flinging me off the wire. The tetherpack had hit almost exactly\n        in the center of ship. you engaged your magnetic boots and knelt down to\n        look at the panel. Suddenly, you was spinning. As you tumbled, it\n        clicked in your head that your boots had not stuck to the panel. you\n        activated the suit’s thrusters. My spin was quickly arrested. you looked\n        back at the tetherpack. It had landed hard and had punched through a\n        panel. It seemed to be clinging to some internal piece of machinery. ‘So\n        the panels aren’t very strong’. you thought. ‘Let’s try another way in’.\n        Hey. They pay us as long as the cargo’s intact. “External skin appears\n        to be non-ferromagnetic. No indication of any airlock. Was not expecting\n        this CAPCOM. you’m going to try another way in.” you floated up the\n        panel. you could see tiny screws barely visible in the panel. Each\n        carefully painted to match the color of panel. you reached out with your\n        glove. you used your sixth sense to select a glove tool. My gloved\n        fingertip reformed as it became as screwdriver bit. you carefully\n        removed the screws and stored them. Always helps to clean up in space.\n        you tugged at the panel and finally engaged the suit’s bio-muscles. The\n        panel finally came free. you poked your head in. “you see. CAPCOM, you\n        have breached the outer hull, but target is double-halled. you’m going\n        to investigate the inner hull for an entry. you will advise when you’ve\n        gained entry into the ship.” As you gripped onto the edge of hole you’d\n        made in the outer hull, you could feel a jerk come through the hull. you\n        then felt a series of vibrating tugs. you could almost swear you heard a\n        shrill creaking noise. Obviously that couldn’t be the case though.\n        There’s no noise in space. Must be vibrations from thrusters of your\n        ship through the cable. you remember that you’d told SAM to hold\n        position though. So what caused the ship to move? you think you’ve been\n        in this game for too long. These deep space solo jobs will get to you.\n        Some of the old timers used to say it was staring at the stars for too\n        long. Lots of scientists say it’s the cosmic radiation you get from\n        years in the suit. you, for one, am leaving the jury out on it for now.\n        Don’t signal to stop the bus unless you want to get off. The inner hull\n        was dark and cramped. Unlike the featureless outer hull, the inner hull\n        had tangles of equipment, pipes, and wires weaved through it. you had to\n        move and dodge as you moved along try to find the goal of your current\n        step in the mission. Now that you’d moved inside a bit, you could barely\n        see your hand in front of me in visible light. However, your suit could\n        see in a wide band of EM bands, so you could still see the contours of\n        it through your sixth sense, the image inferred through a synthesis of\n        heat, radio, and other sensors. you could make out the outline of a\n        panel on the inner hull. No power, no AR. No work. you opened up the\n        panel and grabbed the manual release lever. Not a big red button, but\n        you can work with it. you pumped the manual release lever using the\n        enhanced strength of the suit. The oil gushed through the system, moving\n        various parts of the system until you saw six pins around the circular\n        hatch pop out. you turned the lever and pushed in. The hatch itself\n        slowly started to float away from its mount. you pulled the lever on the\n        hatch to swing it open fully. you rushed towards the hatch. Inside, you\n        could see the pale green screen of the airlock hanging in the inky\n        black. “Ok, so the airlock is running on internal batteries only. you\n        repeat, ship appears to have no battery backups active. Airlocks are in\n        emergency mode.” you reached out of the airlock panel with your sixth\n        sense. For a second nothing happened. “Oh yeah. Emergency mode doesn’t\n        have enough power for AR.” you said to myself. you punched “FAST CYCLE”\n        on the airlock. The outside hatch automatically started to close. you\n        jerked it close and turned the lever. As it locked, you hear a thin,\n        high ‘beep’ as the airlock cycled. “SAM--check atmospheric content.” No\n        need to waste vacuum time if you don’t have to. you waited for a few\n        seconds. “SAM?” Apparently he took the command to turn himself off\n        pretty seriously. Or he’s ignoring me. He sure is acting weird today.\n        you looked down at your wrist through AR. you could see a readout for\n        the atmosphere sensors. you added it all up in your head and nodded to\n        myself. As you clicked the helmet off, the AR overview slide away.\n        Without the helmet muffing the sounds around me--that’s when you\n        realized what was was bugging me about this ship. It was completely\n        silent. you’d been inside powered down ships before, but never one with\n        all the batteries drained like this. Every ship has large battery backup\n        units and solar panels which automatically deploy in the event of main\n        engine power failures. Without your helmet’s displays and sensors, My\n        world changed from bright and multicolored to pitch black. The panel on\n        the airlock cast a small pool of green light around me, sending out deep\n        shadows. There’s an old saying among spacers. ‘Just as a body without\n        breath is a corpse, a ship without power is a coffin.’ Sitting in the\n        quiet of the ship, you felt a chill go down your spine as you remembered\n        this saying. But you had a job to do, and you wasn’t going to let\n        something like that get the better of me. “CAPCOM, ship is completely\n        dark. you’ve never seen a ship so drained. She must have been on the\n        float for a while, huh? The emergency solars must not have deployed.\n        you’m going to head to engineering to see if you can get some power in\n        here.”\n      </Text>\n      <ChapterEnd />\n    </Section>\n  </Chapter>\n);\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport default ({ children }) => (\n  <Typography align=\"center\" variant=\"h1\">\n    {children}\n  </Typography>\n);\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport default ({ children }) => (\n  <Typography align=\"center\" variant=\"h4\">\n    {children}\n  </Typography>\n);\n","import React from \"react\";\nimport Chapter, { ChapterEnd } from \"../components/Chapter\";\nimport Section from \"../components/Section\";\nimport Text from \"../components/Text\";\nimport Goto from \"../components/Goto\";\nimport WaitForInput from \"../components/WaitForInput\";\nimport Title from \"../components/Title\";\nimport Subtitle from \"../components/Subtitle\";\nimport NL from \"../components/Newline\";\n\nconst Intro = props => (\n  <Chapter entry=\"title-page\" {...props}>\n    <Section uid=\"title-page\">\n      <Text>\n        <Title>Fenris</Title>\n        <NL />\n        <Subtitle>By Jon Monroe</Subtitle>\n      </Text>\n      <WaitForInput>Start</WaitForInput>\n      <Goto section=\"help-text\" />\n    </Section>\n    <Section uid=\"help-text\">\n      <Text>\n        The following is an interactive narrative experience.\n        <NL />\n        The application automatically saves your progress.\n        <NL />\n        Blue buttons indicate choices you can make.\n        <NL />\n        Red buttons indicate checkpoints you can restart from.\n        <NL />\n      </Text>\n      <WaitForInput>I understand</WaitForInput>\n      <ChapterEnd />\n    </Section>\n  </Chapter>\n);\n\nexport default Intro;\n","import React from \"react\";\nimport Chapter from \"../components/Chapter\";\nimport Section from \"../components/Section\";\nimport Text from \"../components/Text\";\n\nconst End = props => (\n  <Chapter entry=\"end\" {...props}>\n    <Section uid=\"end\">\n      <Text>To Be Continued!</Text>\n    </Section>\n  </Chapter>\n);\n\nexport default End;\n","import React from \"react\";\n\nimport Story from \"../components/Story\";\n\nimport ChapterOne from \"./ChapterOne\";\nimport Intro from \"./Intro\";\nimport End from \"./End\";\n\nexport default () => (\n  <Story>\n    <Intro />\n    <ChapterOne />\n    <End />\n  </Story>\n);\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport blueGrey from \"@material-ui/core/colors/blueGrey\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: \"#005276\" },\n    secondary: { main: \"#BB2400\" },\n    background: { default: blueGrey[800] }\n  },\n  typography: {\n    fontFamily:\n      \"Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace\",\n    h1: {\n      fontSize: \"5rem\"\n    }\n  }\n});\n\nexport default theme;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","import React from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport Story from \"./story\";\nimport theme from \"./theme\";\n\nexport default () => (\n  <ThemeProvider theme={theme}>\n    <CssBaseline />\n    <Story />\n  </ThemeProvider>\n);\n"],"sourceRoot":""}